CREATE OR REPLACE PACKAGE obliczenia
IS
FUNCTION CENA_WYPOZYCZENIE(vin NUMBER, ile_dni NUMBER) RETURN NUMBER;
FUNCTION CENA_ZWROT(id_wyp NUMBER, prac NUMBER) RETURN NUMBER;
END;
CREATE OR REPLACE PACKAGE BODY obliczenia
IS

FUNCTION CENA_WYPOZYCZENIE(vin NUMBER, ile_dni NUMBER) RETURN NUMBER
iS
  SZUKANA_WARTOSC NUMBER;
BEGIN
  SELECT (CENA * ile_dni) INTO SZUKANA_WARTOSC FROM AUTO WHERE NR_VIN = vin;
  RETURN SZUKANA_WARTOSC;
END;
FUNCTION CENA_ZWROT(id_wyp NUMBER, prac NUMBER) RETURN NUMBER
IS
  SZUKANA_WARTOSC NUMBER;
  REK_WYP WYPOZYCZENIE%ROWTYPE;
  REK_AUTO AUTO%ROWTYPE;
  ILE_DNI NUMBER;  
BEGIN
  SELECT nr_vin, data_wyp INTO rek_wyp.nr_vin, rek_wyp.data_wyp FROM wypozyczenie WHERE id_wypozyczenie = id_wyp;
  SELECT cena INTO rek_auto.cena FROM auto WHERE nr_vin = rek_wyp.nr_vin;
  ile_dni := TO_NUMBER(TRUNC(SYSDATE-rek_wyp.data_wyp));
  
  SELECT (ile_dni * rek_auto.cena) INTO SZUKANA_WARTOSC FROM AUTO WHERE NR_VIN = rek_wyp.nr_vin;
  RETURN SZUKANA_WARTOSC;
END;
END;








