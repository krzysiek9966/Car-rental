CREATE TABLE Auto (
  nr_vin NUMBER(20) NOT NULL PRIMARY KEY,
  marka VARCHAR(20),
  model VARCHAR(20),
  typ VARCHAR(20),
  kolor VARCHAR(20),
  rok VARCHAR(4),
  cena DECIMAL(10,2),
  ubezpieczenie DATE,
  przeglad DATE,
  id_inwestycja NUMBER(20) FOREIGN KEY REFERENCES Inwestycja(id_inwestycja)
);

CREATE TABLE Wypo¿yczenie (
  id_wypozyczenia INT NOT NULL PRIMARY KEY,
  nr_vin INT(20) FOREIGN KEY REFERENCES Auto(nr_vin),
  id_klient INT(20) FOREIGN KEY REFERENCES Klient(id_klient),
  id_wypozyczalnia INT(20) FOREIGN KEY REFERENCES Wypo¿yczalnia(id_wypozyczalnia),
  id_pracownik INT(20) FOREIGN KEY REFERENCES Pracownik(id_pracownik),
  data_wyp DATE,
  data_zwr DATE,
  koszt DECIMAL(10,2)
);

CREATE TABLE Katalog (
  id_wypozyczalnia NUMBER(20),
  id_wypozyczalnia NUMBER(20)
);

CREATE TABLE Klient (
  id_klient NUMBER NOT NULL PRIMARY KEY,
  imie VARCHAR(20),
  nazwisko VARCHAR(20),
  telefon NUMBER(20),
  miasto VARCHAR(40)
);

CREATE TABLE Pracownik (
  id_pracownik NUMBER NOT NULL PRIMARY KEY,
  imie VARCHAR(20),
  nazwisko VARCHAR(20),
  telefon NUMBER(20),
  miasto VARCHAR(40),
  rok_urodzenia NUMBER(4)
);

CREATE TABLE Wypo¿yczalnia (
  id_wypozyczalnia NUMBER NOT NULL PRIMARY KEY,
  nr_vin NUMBER(20) FOREIGN KEY REFERENCES Auto(nr_vin),
  id_pracownik NUMBER(20) FOREIGN KEY REFERENCES Pracownik(id_pracownik),
  miasto VARCHAR(40),
  telefon NUMBER(20)
);

ALTER TABLE WYPOZYCZENIE
ADD CONSTRAINT WYPOZYCZENIE_AUTO_FK
  FOREIGN KEY (NR_VIN)
  REFERENCES "AUTO"(NR_VIN)
  ON DELETE CASCADE
ADD CONSTRAINT WYPOZYCZENIE_KLIENT_FK
  FOREIGN KEY (ID_KLIENT)
  REFERENCES KLIENT(ID_KLIENT)
  ON DELETE CASCADE
ADD CONSTRAINT WYPOZYCZENIE_WYPOZYCZALNIA_FK
  FOREIGN KEY (ID_WYPOZYCZALNIA)
  REFERENCES WYPOZYCZALNIA(ID_WYPOZYCZALNIA)
  ON DELETE CASCADE
ADD CONSTRAINT WYPOZYCZENIE_PRACOWNIK_WYP_FK
  FOREIGN KEY (ID_PRACOWNIK_WYP)
  REFERENCES PRACOWNIK(ID_PRACOWNIK)
  ON DELETE CASCADE
ADD CONSTRAINT WYPOZYCZENIE_PRACOWNIK_ZWR_FK
  FOREIGN KEY (ID_PRACOWNIK_ZWR)
  REFERENCES PRACOWNIK(ID_PRACOWNIK)
  ON DELETE CASCADE; 
